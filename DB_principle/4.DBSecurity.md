[toc]

# 1. 存取控制
- 自主存取控制(Discretetionary Access Control,DAC)
    - 用户对于不同的数据库对象有不同的存取权限
    - 不同的用户对于同一对象也有不同的权限
    - 用户可将其拥有的存取权限转授给其他用户
- 强制存取控制(Mandatory Access Control,MAC)
    - 每个数据对象被标以一定的密级
    - 每个用户也被授予一个级别的许可证


## 1.1 自主存取控制

通过SQL的GRANT和REVOKE语句实现

关系数据库系统中的存取权限
| 对象 | 操作类型 |
| -------------- | --------------- |
| 模式 | CREATE SCHEMA |
| 基本表 | CREATE TABLE,ALTER TABLE |
| 视图 | CREATE VIEW |
| 索引 | CREATE INDEX |
| 基本表和视图 | SELECT,INSERT,UPDATE,DELETE,REFERENCES,ALL PRIVILEGES |
| 属性列 | SELECT,INSERT,UPDATE,REFERENCES,ALL PRIVILEGES |

### 1.1.1 授权GRANT
```sql
//将对指定操作对象的指定操作权限授予指定的用户
GRANT <权限>[,<权限>]
[ON <对象类型> <对象名>]
TO <用户>[,<用户>]|public
[WITH GRANT OPTION]     //该用户具有将此权限转授给其他用户的权限
```
> 对属性列的授权可以在权限后指出相应属性列名，如UPDATE(Sno)

### 1.1.2 回收REVOKE
```sql
REVOKE <权限>[,<权限>]
[ON <对象类型> <对象名>]
FROM <用户>[,<用户>]|PUBLIC [CASCADE]   //可级联回收
```



### 1.1.3 数据库角色

数据库角色：被命名的一组与数据库操作相关的权限，角色是权限的集合

```sql
//创建角色
CREATE RULE <角色名>


//给角色授权
GRANT <权限>[,<权限>]
[ON <对象类型> <对象名>]
TO <角色>[,<角色>]

//将一个角色授予其他的用户或角色
GRANT <角色1>[,<角色2>]
TO <角色3>[,<用户>]
[WITH ADMIN OPTION]     //该用户具有将此权限转授给其他用户的权限


//角色权限的收回
REVOKE <权限>[,<权限>]
[ON <对象类型> <对象名>]
FROM <角色>[,<角色>]    
```
> DBMS查询数据字典，更具其存取权限对操作的合法性进行检查，若该用户的操作请求超出了定义的权限，系统将拒绝执行此操作


自主存取的优缺点
- 优点：能够通过授权机制有效的控制其他用户对敏感数据的存取
- 缺点：可能存在数据的“无意泄漏”
    > 这种机制仅仅通过对数据的存取标志进行安全控制，而数据本身并无安全性标志。  
    > 可通过对系统控制下的所有主客体实施强制存取控制策略


## 1.2 强制存取控制方法

主体和客体
- 主体：主体是系统中的活动实体，如用户
- 客体：客体是系统中的被动实体，受主体操纵，如文件、基本表、索引和试图等。


敏感度标记(Label)  
绝密(Top Secret)，机密(Secret)，可信(Confidential)，公开(Public)  
主体的敏感度标记称为许可证级别  
客体的敏感度标记称为密级


强制存取控制规则
- 仅当主体的许可证级别**大于或等于**客体的密级时，该主体才能**读**取相应的客体
- 仅当主题的许可证级别**小于或等于**客体的密级时，该主体才能**写**相应的客体


特点：
- MAC是对数据本身进行密级标记
- 无论数据如何复制，标记与数据是一个不可分的整体



# 2. 视图机制

为不同的用户定义不同的试图，就可以把数据对象限制在一定的范围内，通过试图机制把保密的数据对无权存取的用户隐藏起来，从而自动对数据提供一定的程度的保护机制





# 3. 审计

审计日志(Audit Log)：将用户对数据库的所有操作记录在上面

> DBA利用审计日志，找出非法存取数据的人、时间和内容  
> 审计是很浪费时间和空间的

```sql
//查看审计打开状态
SHOW AUDIT_TRAIL;

//打开审计功能
SET AUDIT_TRAIL TO ON;

//对指定表的指定操作进行审计
AUDIT_TRAIL <权限> ON <表名>

//取消对指定表的指定操作进行审计
NOAUDIT <权限> ON <表名>
```


# 4. 数据加密

防止数据库中数据在存储和传输过程中失密的有效手段

基本思想：根据一定的算法将原文（明文）变换为不可直接识别的格式（密文）

加密方法：
- 替换方法
- 置换方法
- 混合方法
