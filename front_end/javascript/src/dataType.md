
# 变量


## 变量声明

- `var`: 声明一个变量，可选初始化一个值。
- `let`: 声明一个块作用域的局部变量，可选初始化一个值。
- `const`: 声明一个块作用域的只读常量。
> 只保证变量的值不变，对于指针类引用型变量，只能保证指向的地址不变，例如数组和对象类型

- 不使用关键字
    - 非严格模式下，直接赋值会创建全局变量
    - 严格模式下，直接赋值会导致错误

> 如果访问一个未声明的变量会导致抛出 ReferenceError 异常：

## 变量的作用域

- 全局变量：函数之外声明的变量，可被当前文件中的任何其他代码所访问。
    > 全局变量是全局对象的属性。  
    > 在网页中，（译注：缺省的）全局对象是 window ，所以你可以用形如 window.variable 的语法来设置和访问全局变量。

- 局部变量：在函数内部声明的变量，叫做局部变量，因为它只能在当前函数的内部访问。

> ECMAScript6后的js添加了语句块(`{}`)作用域

## 变量提升

`变量提升`（Hoisting）是指JavaScript引擎在执行代码时，会在实际执行之前将`变量`和`函数`的`声明`提升到当前作用域的顶部。

- 使用`var`声明的变量：声明会被提升，但赋值操作仍在代码中原本的位置。
- 函数声明：整个函数会被提升，包括函数体。

> 暂时性死区：使用 let 和 const 进行变量声明时，变量提升仍然会发生，但与 var 不同的是，let 和 const 声明的变量在声明之前无法访问。这段时间被称为暂时性死区




# 数据类型

## 数字



- 语言标准要求数字字面量必须是无符号的
> 但是像-123.4这样的代码片段还是没有问题的，会被解释为一元操作符-应用于数字字面量123.4
- 可通过添加前缀'0,0x,0b'声明字面量的进制
- 浮点数字面量的表示：`[(+|-)][digits][.digits][(E|e)[(+|-)]digits]`




1. 数字(Number)

    整数或浮点数，例如： 42 或者 3.14159。

2. 任意精度的整数（BigInt）

    可以安全地存储和操作大整数，甚至可以超过数字的安全整数限制。


**数字形式**

- 数字均为双精度浮点类型
- 三种符号值
    - +Infinity（正无穷）
    - -Infinity（负无穷）
    - NaN (not-a-number，非数字)。
- bigInt: 极大的数字
- 进制
    - 二进制: 以零为开头，后面接一个小写或大写的拉丁文字母 B
    - 八进制: 给一个数字添加前缀“0o”。
    - 十进制: 
    - 十六进制: 以零为开头，后面接一个小写或大写的拉丁文字母 X
    > 以 0 为开头的。假如 0 后面的数字大于等于8，该数字将会被转换成十进制数字；如果小于8，则会当作八进制处理
- 指数形式: aEb


**数字对象Number**

- 属性
    - 最大/小值
    - 正/负无穷
    - NaN.....
- 方法
    - 判断数据类型
    - 判断形式
    - 类型转换....



**数学对象Math**

- 属性
    - pi 
- 方法
    - 绝对值
    - 随机数
    - 三角函数、指数、对数...


## 字符串(String)



- 可以使用单引号或双引号
- 可以使用索引位置来访问字符串中的每个字符
    > 字符串是不可变的`类数组`对象
- 对于字符串变量/常量（不是对象），存在一些属性和方法用于操作字符串。
    > JavaScript 自动把 String 字面值转换为一个临时的 String 对象，然后调用其相应方法，最后丢弃此临时对象。

```javascript
var x = "John";
var y = new String("John");
typeof x // 返回 String
typeof y // 返回 Object
```


- 字符串对象的方法
    - 查询目标位置的字符或目标字符的位置
    - 连接两个字符串
    - 提取字符串
    - 使用正则表达式
    - 是否以...开头或结束



- 字符串模板

字符串模板使用反引号（\` \`）而不是常规的单引号（' '）或双引号（" "）。可以在字符串中嵌入变量或表达式，嵌入的部分使用 ${} 包裹。

```javascript
let name = "Jimmy";
let greeting = `Hello, ${name}!`;
console.log(greeting); // 输出: "Hello, Jimmy!"

let a = 10;
let b = 20;
let result = `The sum of a and b is ${a + b}.`;
console.log(result); // 输出: "The sum of a and b is 30."
```

- 国际化
    - 日期格式化：时区转换
    - 数字格式化：货币数量值
    - 定序：字符串排序

## 布尔(Boolean)

## 代表（Symbol）

一种实例是唯一且不可改变的数据类型。

## null

一个表明 null 值的特殊关键字。
- 布尔类型环境中会被当作 false。
- 数值类型环境中会被当作 0 来对待

## undefined

一个特殊的关键字，undefined 表示变量未赋值时的属性。


用 var 或 let 语句声明的变量，如果没有赋初始值，则其值为 undefined。


- 布尔类型环境中 undefined 值在会被当作 false 
- 数值类型环境中 undefined 值会被转换为 NaN。


## 函数（Function）

## 数组（Array）


- 使用：数组字面值是一个封闭在方括号对 (`[]`) 中的包含有零个或多个表达式的列表，其中每个表达式代表数组的一个元素。

- 注意：使用数组字面值创建一个全局数组变量时，每次引用该全局数组都会创建一个新的重复的数组，而不是复用之前的数组。

> 数组字面值同时也是数组对象。



**创建数组**

```js
//构造函数
var cars=new Array();
var cars=new Array("Saab","Volvo","BMW");

//字面量赋值
var cars=["Saab","Volvo","BMW"];
```

**理解length**

- length属性是特殊的，如果存在最后一个元素，则其值总是大于其索引的正整数(max+1)
- 可以通过改变数组的length属性对数组进行截断处理


**遍历数组**
- 普通for循环
- foreach()方法
```javascript
const colors = ["red", "green", "blue"];
colors.forEach((color) => console.log(color));
// red
// green
// blue
```
> 未赋值的值不会在 forEach 循环迭代。手动赋值为 undefined 的元素除外


**Array对象的方法**

- concat(): 连接
- join(): 将数组中的所有元素连接成一个字符串。
- push(): 在数组末尾添加一个或多个元素，并返回数组操作后的 length。
- pop(): 从数组移出最后一个元素，并返回该元素。
- shift(): 从数组移出第一个元素，并返回该元素。
- unshift(): 在数组开头添加一个或多个元素，并返回数组的新长度。
- slice(): 从数组提取一个片段，并作为一个新数组返回。
- at(): 返回数组中指定索引处的元素，如果索引超出范围，则返回 undefined。
- splice(): 从数组移除一些元素，并（可选地）替换它们
- reverse(): 原地颠倒数组元素的顺序
- flat(): 返回一个新数组，所有子数组元素递归地连接到其中，直到指定的深度。
```javascript
let myArray = [1, 2, [3, 4]];
myArray = myArray.flat();
// myArray 现在是 [1, 2, 3, 4]，因为子数组 [3, 4] 已被展平
```
- sort(): 对数组的元素进行适当的排序，并返回对数组的引用。
- indexOf(): 在数组中搜索 searchElement 并返回第一个匹配的索引。
- forEach(): 对数组中的每个元素执行 callback 并返回 undefined。
- map(): 返回由每个数组元素上执行 callback 的返回值所组成的新数组。
- filter() 方法返回一个新数组，其中包含 callback 返回 true 的元素。
- find() 方法返回 callback 返回 true 的第一个元素。
- findIndex() 方法返回 callback 返回 true 的第一个元素的索引。
- 如果 callback 对数组中的每一个元素都返回 true，则 every() 方法返回 true。
    > 如果 callback 对数组中至少一个元素返回 true，则 some() 方法返回 true。


## 对象



对象字面值是封闭在花括号对（{}）中的一个对象的零个或多个“属性名—值”对的（元素）列表。





## 日期（Date）



**日期对象**

JavaScript 没有日期数据类型。但是你可以在你的程序里使用 Date 对象和其方法来处理日期和时间。Date 对象有大量的设置、获取和操作日期的方法。它并不含有任何属性。

> JavaScript 处理日期数据类似于 Java。这两种语言有许多一样的处理日期的方法，也都是以 1970 年 1 月 1 日 00:00:00 以来的毫秒数来储存数据类型的。


创建一个对象

```javascript
var dateObjectName = new Date([parameters]);
```

前边的语法中的参数（parameters）可以是一下任何一种：
- 无参数 : 创建今天的日期和时间
- 一个符合以下格式的表示日期的字符串："月 日，年 时：分：秒"
- 一个年，月，日的整型值的集合
- 一个年，月，日，时，分，秒的集合


> 不使用 new 关键字来调用 Date 对象将返回当前时间和日期的字符串


Date对象的方法

- set方法：设置 Date 对象的日期和时间的值。
- get方法：获取 Date 对象的日期和时间的值。
    > 通过“get”和“set”方法，你可以分别设置和获取秒，分，时，日，星期，月份，年。
- to方法：返回 Date 对象的字符串格式的值。
- parse和UTC方法：解析 Date 字符串。



## 正则表达式（RegEcp）






## 带键的集合

本章将介绍由键索引的数据集合；Map 和 Set 对象包含可按插入顺序迭代的元素。

### map

**map对象**

Map 对象就是一个简单的键/值对映射集合，可以按照数据插入时的顺序遍历所有的元素。

- set()
- get()
- has()
- delete()
- clear()


**object和map的比较**

- Object 的键均为字符串或 Symbol 类型，在 Map 里键可以是任意类型。
- 必须手动计算 Object 的大小，但是可以很容易地获取 Map 的大小（size）。
- Map 的遍历遵循元素的插入顺序。
    

### set集合

Set 对象是一组唯一值的集合，可以按照添加顺序来遍历。

- add()
- has()
- delete()


数组和set之间的转换

- Array.from
- new Set(array)


数组和set的比较

- Set 对象允许根据值删除元素，而数组中必须使用基于元素下标的 splice 方法。
- 数组的 indexOf 方法无法找到 NaN 值。
- Set 对象存储唯一值，所以不需要手动处理包含重复值的情况。





# 数据类型的转换


JavaScript 是一种动态类型语言 (dynamically typed language)

这意味着你在声明变量时可以不必指定数据类型，而数据类型会在代码执行时会根据需要自动转换。


1. 通过javascript自身自动转换


- 包含的数字和字符串的表达式中使用加法运算符（+），JavaScript会把数字转换成字符串。

- 使用一元加法运算符。
    > 如：(+"1.1") + (+"1.1") = 2.2

2. 通过使用javascript函数



- 字符串转换为数字
    - parseInt()    
        > 会丢失小数部分
    - parseFloat()

- json字符串转换为javascript对象: var obj = JSON.parse(text.json);
