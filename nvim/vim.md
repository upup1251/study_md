[toc]

# vim哲学
模式编辑的理念+操作符和动作

- 挂起
`ctrl+Z`/`:stop`/`:suspend`  
- 恢复  
fg


# 缓冲区buffers、窗口windows和选项卡tabs

set hidden：切换buffer时不会提示保存

## buffers
```
:buffers    查看所有buffer  
:bnext(previous)    切换至下（上）一个buffer  
:buffer+文件名/:buffer+n    切换至指定buffer  
:bdelete+文件名/:buffer+n   删除指定buffer  
<C-O>,<C-I>    跳转 
```
## windowos
一个windows就是buffer上的一个窗口  
```
打开：
:vsplit filename     垂直分割当前窗口，并在新窗口打开filename文件  
:split filename     水平分割当前窗口，并打开filename  
:new filename   创建一个新窗口并打开filename文件  

切换：
Ctrl-W H    移动光标到左边的窗口
Ctrl-W J    移动光标到下面的窗口
Ctrl-W K    移动光标到上面的窗口
Ctrl-W L    移动光标到右边的窗口

普通模式下关于窗口的指令
Ctrl-W V    打开一个新的垂直分割的窗口
Ctrl-W S    打开一个新的水平分割的窗口
Ctrl-W C    关闭一个窗口
Ctrl-W O    除了当前窗口，关闭所有其他的窗口
```
## tabs
tab是窗口的集合，关闭tab时，仅仅是关闭了窗口布局，文件的数据仍然储存在内存的buffer中，没有被关闭。

```
:tabnew file.txt    在tab中打开一个文件
:tabclose           关闭当前tab
:tabnext/gt            切换至下一个tab
:tabprevious/gT        切换至前一个tab
:tablast            切换至最后一个tab
:tabfirst           切换至第一个tab
n+gt	切换到第几个tab
```


# vim语法

只需要知道一个语法规则：`verb`+`noun`


## 动词

|动词|含义|
|---|---|
|y|复制|
|d|删除|
|c|改变|
|gU|打小|
|zf|折叠|
|zo|展开|
|zR|展开所有|
|zM|折叠所有|
|za|切换折叠状态|

---

行级操作：yy,cc,dd

> 动作只需要做一件事：前往`X`。操作符只需要做一件事：完成`Y`。通过结合一个操作符和一个动作，你就获得了`YX`：在`X`上完成`Y`。


## 名词（在文件中移动）

> 名词前可添加num量词，如2l...

- 字符导航
|名词|含义|
|---|---|
|h|左|
|j|下|
|k|上|
|l|右|

- 单词导航

|名词|含义|
|---|---|
|w|移动到下一个单词开头|
|W|移动到下一个词组开头|
|e|移动到下一个单词结尾|
|E|移动到下一个词组结尾|
|b|移动到上一个单词开头|
|B|移动到上一个词组开头|
|ge|移动到前一个单词结尾|
|gE|移动到前一个词组结尾|

- 文本对象

i + object  内部文本对象  
a + object  外部文本对象

|文本对象|含义|
|---|---|
|w|一个单词|
|p|一个段落|
|s|一个句子|
|(或)|一对()|
|{或}|一对{}|
|[或]|一对[]|
|<或>|一对<>|
|t|xml标签|
|"|一对""|
|'|一对''|
|`|一对``|

- 当前行导航

|名词|含义|
|---|---|
|0|移动到本行开头|
|^|移动到本行第一个非空字符|
|g_|移动到本行最后一个非空字符|
|$|移动到本行最后一个字符|
|f|在同一行向后搜索第一个匹配|
|F|在同一行向前搜索第一个匹配|
|t|在同一行向后搜索第一个匹配，并停在匹配前|
|T|在同一行向前搜索第一个匹配，并停在匹配前|
|;|在同一行重复最近一次搜索|
|,|在同一行向相反方向重复最近一次搜索|


- 句子和段落导航

|名词|含义|
|---|---|
|(|跳转到前一个句子|
|)|跳转到后一个句子|
|{|跳转到前一个段落|
|}|跳转到后一个段落|

- 匹配导航

|名词|含义|
|---|---|
|%|跳转到与之匹配的另一个括号...|


- 行号导航

|名词|含义|
|---|---|
|gg|第一行|
|G|最后一行|
|nG|第n行|

> ctrl+g：查看文件总行数

- 窗口导航

|名词|含义|
|---|---|
|H|屏幕顶部|
|M|屏幕中间|
|L|屏幕底部|
|nH|距离屏幕顶部n行处|
|nL|距离屏幕底部n行处|

- 滚动

|名词|含义|
|---|---|
|zt|将当前行置于屏幕顶部|
|zz|将当前行置于屏幕中央|
|zb|将当前行置于屏幕底部|

- 搜索导航

|名词|含义|
|---|---|
|/|向后搜索一个匹配|
|//|重复上一次搜索|
|?|向前搜素一个匹配|
|n|重复上一次搜索(和上一次方向相同)|
|N|重复上一次搜索(和上一次方向相反)|

- 位置标记

|名词|含义|
|---|---|
|ma|用a标签标记一个位置|
|'a|精确回到a标签的位置(行和列)|
|`a`|跳转到a标签的行|
|''|跳转回到上一次跳转前的最后一行|
|``|跳转回到上一次跳转前的最后一个位置|
|`[|跳转到上一次修改或拷贝的文本的开头|
|`]|跳转到上一次修改或拷贝的文本的结尾|

> 任何大于一个单词或超过当前行导航的移动都可能是一个跳转，可通过`ctrl-o`和`ctrl-i`在跳转列表中进行移动。


# 点命令`.`
可通过按下`.`来重复上一个修改操作


# 寄存器
匿名寄存器（""）.
编号寄存器("0-9).
命名寄存器 ("a-z).

# 宏命令

qa                     开始记录动作到寄存器 a
q (while recording)    停止记录

@a    Execute macro from register a
@@    Execute the last executed macros


# 撤销

- 撤销树
切换分支：'g+'和'g-'


# 可视模式

- 可用`o`来切换光标位置


# 外部命令！
- 外部命令：`:r !cmd`：则该命令cmd的输出将插入到当前缓冲区中。
- 内部命令：`:w !cmd`：将缓冲区内容输入给该命令cmd
- 执行外部命令：`! cmd`：执行命令cmd
